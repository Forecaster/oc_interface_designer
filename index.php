<?
//Created 05/03/2016

$ascii_characters = array(
	array("dex" => "128", "hex" => "80", "Binary" => "10000000", "char" => "Ç"),
  array("dex" => "129", "hex" => "81", "Binary" => "10000001", "char" => "ü"),
  array("dex" => "130", "hex" => "82", "Binary" => "10000010", "char" => "é"),
  array("dex" => "131", "hex" => "83", "Binary" => "10000011", "char" => "â"),
  array("dex" => "132", "hex" => "84", "Binary" => "10000100", "char" => "ä"),
  array("dex" => "133", "hex" => "85", "Binary" => "10000101", "char" => "à"),
  array("dex" => "134", "hex" => "86", "Binary" => "10000110", "char" => "å"),
  array("dex" => "135", "hex" => "87", "Binary" => "10000111", "char" => "ç"),
  array("dex" => "136", "hex" => "88", "Binary" => "10001000", "char" => "ê"),
  array("dex" => "137", "hex" => "89", "Binary" => "10001001", "char" => "ë"),
  array("dex" => "138", "hex" => "8A", "Binary" => "10001010", "char" => "è"),
  array("dex" => "139", "hex" => "8B", "Binary" => "10001011", "char" => "ï"),
  array("dex" => "140", "hex" => "8C", "Binary" => "10001100", "char" => "î"),
  array("dex" => "141", "hex" => "8D", "Binary" => "10001101", "char" => "ì"),
  array("dex" => "142", "hex" => "8E", "Binary" => "10001110", "char" => "Ä"),
  array("dex" => "143", "hex" => "8F", "Binary" => "10001111", "char" => "Å"),
  array("dex" => "144", "hex" => "90", "Binary" => "10010000", "char" => "É"),
  array("dex" => "145", "hex" => "91", "Binary" => "10010001", "char" => "æ"),
  array("dex" => "146", "hex" => "92", "Binary" => "10010010", "char" => "Æ"),
  array("dex" => "147", "hex" => "93", "Binary" => "10010011", "char" => "ô"),
  array("dex" => "148", "hex" => "94", "Binary" => "10010100", "char" => "ö"),
  array("dex" => "149", "hex" => "95", "Binary" => "10010101", "char" => "ò"),
  array("dex" => "150", "hex" => "96", "Binary" => "10010110", "char" => "û"),
  array("dex" => "151", "hex" => "97", "Binary" => "10010111", "char" => "ù"),
  array("dex" => "152", "hex" => "98", "Binary" => "10011000", "char" => "ÿ"),
  array("dex" => "153", "hex" => "99", "Binary" => "10011001", "char" => "Ö"),
  array("dex" => "154", "hex" => "9A", "Binary" => "10011010", "char" => "Ü"),
  array("dex" => "155", "hex" => "9B", "Binary" => "10011011", "char" => "¢"),
  array("dex" => "156", "hex" => "9C", "Binary" => "10011100", "char" => "£"),
  array("dex" => "157", "hex" => "9D", "Binary" => "10011101", "char" => "¥"),
  array("dex" => "158", "hex" => "9E", "Binary" => "10011110", "char" => "₧"),
  array("dex" => "159", "hex" => "9F", "Binary" => "10011111", "char" => "ƒ"),
  array("dex" => "160", "hex" => "A0", "Binary" => "10100000", "char" => "á"),
  array("dex" => "161", "hex" => "A1", "Binary" => "10100001", "char" => "í"),
  array("dex" => "162", "hex" => "A2", "Binary" => "10100010", "char" => "ó"),
  array("dex" => "163", "hex" => "A3", "Binary" => "10100011", "char" => "ú"),
  array("dex" => "164", "hex" => "A4", "Binary" => "10100100", "char" => "ñ"),
  array("dex" => "165", "hex" => "A5", "Binary" => "10100101", "char" => "Ñ"),
  array("dex" => "166", "hex" => "A6", "Binary" => "10100110", "char" => "ª"),
  array("dex" => "167", "hex" => "A7", "Binary" => "10100111", "char" => "º"),
  array("dex" => "168", "hex" => "A8", "Binary" => "10101000", "char" => "¿"),
  array("dex" => "169", "hex" => "A9", "Binary" => "10101001", "char" => "⌐"),
  array("dex" => "170", "hex" => "AA", "Binary" => "10101010", "char" => "¬"),
  array("dex" => "171", "hex" => "AB", "Binary" => "10101011", "char" => "½"),
  array("dex" => "172", "hex" => "AC", "Binary" => "10101100", "char" => "¼"),
  array("dex" => "173", "hex" => "AD", "Binary" => "10101101", "char" => "¡"),
  array("dex" => "174", "hex" => "AE", "Binary" => "10101110", "char" => "«"),
  array("dex" => "175", "hex" => "AF", "Binary" => "10101111", "char" => "»"),
  array("dex" => "176", "hex" => "B0", "Binary" => "10110000", "char" => "░"),
  array("dex" => "177", "hex" => "B1", "Binary" => "10110001", "char" => "▒"),
  array("dex" => "178", "hex" => "B2", "Binary" => "10110010", "char" => "▓"),
  array("dex" => "179", "hex" => "B3", "Binary" => "10110011", "char" => "│"),
  array("dex" => "180", "hex" => "B4", "Binary" => "10110100", "char" => "┤"),
  array("dex" => "181", "hex" => "B5", "Binary" => "10110101", "char" => "╡"),
  array("dex" => "182", "hex" => "B6", "Binary" => "10110110", "char" => "╢"),
  array("dex" => "183", "hex" => "B7", "Binary" => "10110111", "char" => "╖"),
  array("dex" => "184", "hex" => "B8", "Binary" => "10111000", "char" => "╕"),
  array("dex" => "185", "hex" => "B9", "Binary" => "10111001", "char" => "╣"),
  array("dex" => "186", "hex" => "BA", "Binary" => "10111010", "char" => "║"),
  array("dex" => "187", "hex" => "BB", "Binary" => "10111011", "char" => "╗"),
  array("dex" => "188", "hex" => "BC", "Binary" => "10111100", "char" => "╝"),
  array("dex" => "189", "hex" => "BD", "Binary" => "10111101", "char" => "╜"),
  array("dex" => "190", "hex" => "BE", "Binary" => "10111110", "char" => "╛"),
  array("dex" => "191", "hex" => "BF", "Binary" => "10111111", "char" => "┐"),
  array("dex" => "192", "hex" => "C0", "Binary" => "11000000", "char" => "└"),
  array("dex" => "193", "hex" => "C1", "Binary" => "11000001", "char" => "┴"),
  array("dex" => "194", "hex" => "C2", "Binary" => "11000010", "char" => "┬"),
  array("dex" => "195", "hex" => "C3", "Binary" => "11000011", "char" => "├"),
  array("dex" => "196", "hex" => "C4", "Binary" => "11000100", "char" => "─"),
  array("dex" => "197", "hex" => "C5", "Binary" => "11000101", "char" => "┼"),
  array("dex" => "198", "hex" => "C6", "Binary" => "11000110", "char" => "╞"),
  array("dex" => "199", "hex" => "C7", "Binary" => "11000111", "char" => "╟"),
  array("dex" => "200", "hex" => "C8", "Binary" => "11001000", "char" => "╚"),
  array("dex" => "201", "hex" => "C9", "Binary" => "11001001", "char" => "╔"),
  array("dex" => "202", "hex" => "CA", "Binary" => "11001010", "char" => "╩"),
  array("dex" => "203", "hex" => "CB", "Binary" => "11001011", "char" => "╦"),
  array("dex" => "204", "hex" => "CC", "Binary" => "11001100", "char" => "╠"),
  array("dex" => "205", "hex" => "CD", "Binary" => "11001101", "char" => "═"),
  array("dex" => "206", "hex" => "CE", "Binary" => "11001110", "char" => "╬"),
  array("dex" => "207", "hex" => "CF", "Binary" => "11001111", "char" => "╧"),
  array("dex" => "208", "hex" => "D0", "Binary" => "11010000", "char" => "╨"),
  array("dex" => "209", "hex" => "D1", "Binary" => "11010001", "char" => "╤"),
  array("dex" => "210", "hex" => "D2", "Binary" => "11010010", "char" => "╥"),
  array("dex" => "211", "hex" => "D3", "Binary" => "11010011", "char" => "╙"),
  array("dex" => "212", "hex" => "D4", "Binary" => "11010100", "char" => "╘"),
  array("dex" => "213", "hex" => "D5", "Binary" => "11010101", "char" => "╒"),
  array("dex" => "214", "hex" => "D6", "Binary" => "11010110", "char" => "╓"),
  array("dex" => "215", "hex" => "D7", "Binary" => "11010111", "char" => "╫"),
  array("dex" => "216", "hex" => "D8", "Binary" => "11011000", "char" => "╪"),
  array("dex" => "217", "hex" => "D9", "Binary" => "11011001", "char" => "┘"),
  array("dex" => "218", "hex" => "DA", "Binary" => "11011010", "char" => "┌"),
  array("dex" => "219", "hex" => "DB", "Binary" => "11011011", "char" => "█"),
  array("dex" => "220", "hex" => "DC", "Binary" => "11011100", "char" => "▄"),
  array("dex" => "221", "hex" => "DD", "Binary" => "11011101", "char" => "▌"),
  array("dex" => "222", "hex" => "DE", "Binary" => "11011110", "char" => "▐"),
  array("dex" => "223", "hex" => "DF", "Binary" => "11011111", "char" => "▀"),
  array("dex" => "224", "hex" => "E0", "Binary" => "11100000", "char" => "α"),
  array("dex" => "225", "hex" => "E1", "Binary" => "11100001", "char" => "ß"),
  array("dex" => "226", "hex" => "E2", "Binary" => "11100010", "char" => "Γ"),
  array("dex" => "227", "hex" => "E3", "Binary" => "11100011", "char" => "π"),
  array("dex" => "228", "hex" => "E4", "Binary" => "11100100", "char" => "Σ"),
  array("dex" => "229", "hex" => "E5", "Binary" => "11100101", "char" => "σ"),
  array("dex" => "230", "hex" => "E6", "Binary" => "11100110", "char" => "µ"),
  array("dex" => "231", "hex" => "E7", "Binary" => "11100111", "char" => "τ"),
  array("dex" => "232", "hex" => "E8", "Binary" => "11101000", "char" => "Φ"),
  array("dex" => "233", "hex" => "E9", "Binary" => "11101001", "char" => "Θ"),
  array("dex" => "234", "hex" => "EA", "Binary" => "11101010", "char" => "Ω"),
  array("dex" => "235", "hex" => "EB", "Binary" => "11101011", "char" => "δ"),
  array("dex" => "236", "hex" => "EC", "Binary" => "11101100", "char" => "∞"),
  array("dex" => "237", "hex" => "ED", "Binary" => "11101101", "char" => "φ"),
  array("dex" => "238", "hex" => "EE", "Binary" => "11101110", "char" => "ε"),
  array("dex" => "239", "hex" => "EF", "Binary" => "11101111", "char" => "∩"),
  array("dex" => "240", "hex" => "F0", "Binary" => "11110000", "char" => "≡"),
  array("dex" => "241", "hex" => "F1", "Binary" => "11110001", "char" => "±"),
  array("dex" => "242", "hex" => "F2", "Binary" => "11110010", "char" => "≥"),
  array("dex" => "243", "hex" => "F3", "Binary" => "11110011", "char" => "≤"),
  array("dex" => "244", "hex" => "F4", "Binary" => "11110100", "char" => "⌠"),
  array("dex" => "245", "hex" => "F5", "Binary" => "11110101", "char" => "⌡"),
  array("dex" => "246", "hex" => "F6", "Binary" => "11110110", "char" => "÷"),
  array("dex" => "247", "hex" => "F7", "Binary" => "11110111", "char" => "≈"),
  array("dex" => "248", "hex" => "F8", "Binary" => "11111000", "char" => "°"),
  array("dex" => "249", "hex" => "F9", "Binary" => "11111001", "char" => "∙"),
  array("dex" => "250", "hex" => "FA", "Binary" => "11111010", "char" => "·"),
  array("dex" => "251", "hex" => "FB", "Binary" => "11111011", "char" => "√"),
  array("dex" => "252", "hex" => "FC", "Binary" => "11111100", "char" => "ⁿ"),
  array("dex" => "253", "hex" => "FD", "Binary" => "11111101", "char" => "²"),
  array("dex" => "254", "hex" => "FE", "Binary" => "11111110", "char" => "■"),
  array("dex" => "255", "hex" => "FF", "Binary" => "11111111", "char" => " ")
);
?>
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>OpenComputers Interface Designer</title>
  <link rel="stylesheet" href="main.css"/>
  <script src="main.js"></script>
</head>
<body>
<h1>OpenComputers Interface Designer</h1>
<div class="main-container">
	<div id="screen" class="screen">
		<div class="screen_part screen_top"></div>
		<div class="screen_part screen_bottom"></div>
		<div class="screen_part screen_left"></div>
		<div class="screen_part screen_right"></div>
		<div class="screen_part screen_top_left"></div>
		<div class="screen_part screen_top_right"></div>
		<div class="screen_part screen_bottom_left"></div>
		<div class="screen_part screen_bottom_right"></div>
		<div id="monitor_container" class="monitor_container">
			<div id="monitor" class="monitor">
				<div id="shape_container" class="shape_container"></div>
			</div>
		</div>
	</div>
  <div class="container msg_box" id="messages"></div>
</div>
<div class="main-container" style="width: 600px;">
  <div class="container">Controls:</div>
	<div class="container">
		<div>Width, Height</div>
		<input type="number" id="block_width" placeholder="Width" min="1" max="8" />
		<input type="number" id="block_height" placeholder="Height" min="1" max="6" />
		<button onclick="setScreenSizeControl()">Set Screen Size (Blocks)</button>
	</div>
  <div class="container">
		<div><span>Width</span><span style="margin-left: 140px;">Height</span></div>
    <input type="number" id="res_width" placeholder="Width" />
    <input type="number" id="res_height" placeholder="Height" />
    <button onclick="SetResolutionControl()">Set Resolution</button>
  </div>
  <div class="container">
    <div class="container">Resolution Presets (Doesn't change screen size):</div>
    <div class="container" id="resolution_presets"></div>
  </div>
  <div class="container">
    <table>
      <TR><TD><label for="color_value">Web Hex:</label></TD><TD><input type="text" placeholder="Web Hex Value" id="color_value"/></TD></TR>
      <TR><TD><label for="color_value_computronics">Lua Hex:</label></TD><TD><input type="text" placeholder="Lua Hex Value" id="color_value_computronics"/></TD></TR>
    </table>
    <div>
      <label><input type="radio" name="background_foreground_switch" onclick="setBackgroundTarget();" checked/> Background</label>
      <label><input type="radio" name="background_foreground_switch" onclick="setForegroundTarget();"/> Foreground (Text)</label>
    </div>
  </div>
  <div class="container">Click a created shape to show controls</div>
  <div class="container" id="shape_controls" style="display: none;">
    <div>Shape Controls</div>
    <div>
      <button onclick="delete_shape(selected_shape_id)">Delete Shape</button>
    </div>
    <div>This code draws the selected shape:</div>
    <div>
			<textarea title="Fill Code" id="fill_code" readonly="readonly" style="width: 400px; height: 1.2em; resize: none;"></textarea>
		</div>
    <div>This statement tests for clicks within the selected shape:</div>
    <div>
			<textarea title="Event conditions" id="pull_code" readonly="readonly" style="width: 400px; height: 4em; resize: vertical;"></textarea>
		</div>
  </div>
	<div class="container">
		<div>Fill calls for all shapes:</div>
		<textarea title="Draw all shapes" id="all_shapes" readonly="readonly" style="width: 400px; height: 6em; resize: vertical;"></textarea>
	</div>
  <div id="current_colors">Current Colors</div>
  <div class="container" style="margin-top: 10px;" id="color_picker">
  </div>
</div>
<div class="main-container" style="width: 700px;">
	<p style="color: red; font-weight: bold">
		Currently being upgraded! Changing resolution or screen size will cause it to wonk out and place the image in the wrong place! Other than that it should work as expected.
	</p>
	<p style="color: red; font-weight: bold">
		It also seems selecting the shapes you create is not possible at this time.
	</p>
  <p>
    Hi! This is mostly a prototype still. Beware of bugs and lack of features.
	</p>
	<p>
		Please report any issues or request features on the <a href="https://github.com/Forecaster/oc_interface_designer">GitHub repository</a>.
	</p>
	<p>
		You may also visit my <a href="http://towerofawesome.org/forum/forumdisplay.php?fid=58">forum</a>, join my <a href="https://discord.gg/mx849JN">Discord server</a>, join #oc on <a href="http://esper.net">esper.net</a> via IRC or <a href="https://discord.gg/0hVukoQ2KYifZFCA">OpenComputers discord server</a> and poke Forecaster to get help, report bugs or provide suggestions!
  </p>
  <p>
    This application is for assisting with creating graphical interfaces for OpenComputers programs, something that I've always found slightly intimidating because it requires dealing with coordinates and stuff. Which means lots of numbers to keep track of.
  </p>
  <p>
    But with this you can graphically draw your buttons and boxes and get the code required to draw them with your program and to test for click events for them!
  </p>
  <p>
    Usage:<br/>
    1. Select the resolution preset you need, or set a custom one<br/>
    2. Select two points on the screen to create a shape<br/>
    3. Click the created shape to show fill code and click event condition for this shape<br/>
    4. Create as many shapes as you need
  </p>
</div>
</body>

<script>
	const pixelWidth = 8;
	const pixelHeight = 16;

	let screenWidth = 4;
	let screenHeight = 2;

	const blockWidth = 418/screenWidth;
	const blockHeight = 274/screenHeight;

	let width = 160;
	let height = 50;

	const maxScreenWidth = 8;
	const maxScreenHeight = 6;

	let target = "background";
	let background = "red";
	let foreground = "white";

	let shapes = [];
	let shape_data = [];

	let selected_shape_id = null;

	let selectAposX = null;
	let selectAposY = null;
	let selectBposX = null;
	let selectBposY = null;

	const colors = {
		rows: ["00", "33", "66", "99", "CC", "FF"],
		blocks: ["00", "24", "49", "6D", "92", "B6", "DB", "FF"],
		columns: ["00", "40", "80", "C0", "FF"],
		grays: ["0F", "1E", "2D", "4B", "5A", "69", "78", "87", "96", "A5", "B4", "C3", "D2", "E1", "F0"]
	};

	const max_resolution_area = 8000;

	const resolution_presets = {
		T1: {x: 50, y: 16},
  	T2: {x: 80, y: 25},
  	T3: {x: 160, y: 50},
  	Tablet: {x: 80, y: 25},
	};

	setScreenSize(screenWidth, screenHeight);
  setResolution(resolution_presets.T1.x, resolution_presets.T1.y);
  generate_preset_buttons();
  generate_color_picker();
  update_current_colors();
</script>

</html>